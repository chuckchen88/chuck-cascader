(function(f,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(f=typeof globalThis<"u"?globalThis:f||self,e(f.ChuckCascader={},f.Vue))})(this,function(f,e){"use strict";const D={key:0,class:"iconfont icon-success"},L={key:1,class:"iconfont icon-minus"},T={name:"CheckBox"},v=e.defineComponent({...T,props:{color:{},modelValue:{type:Boolean},childChecked:{type:Boolean},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","update:value"],setup(i,{emit:d}){const n=i,s=e.computed(()=>n.modelValue||n.childChecked?n.color:"white"),r=e.computed(()=>n.modelValue||n.childChecked?n.color:"#aaa"),_=()=>{if(n.disabled)return!1;d("update:modelValue",!n.modelValue),d("update:value",!n.modelValue)};return(m,a)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["checkbox",{disabled:m.disabled}]),style:e.normalizeStyle(`background-color:${s.value};outline:${r.value} solid 1px`),onClick:_},[m.modelValue&&!m.disabled?(e.openBlock(),e.createElementBlock("i",D)):e.createCommentVNode("",!0),m.childChecked&&!m.disabled?(e.openBlock(),e.createElementBlock("i",L)):e.createCommentVNode("",!0)],6))}}),ie="",g=(i,d)=>{const n=i.__vccOpts||i;for(const[s,r]of d)n[s]=r;return n},E=g(v,[["__scopeId","data-v-695cd852"]]),M={key:1,class:"iconfont icon-next"},j={name:"RadioBox"},A=e.defineComponent({...j,props:{color:{},modelValue:{type:Boolean},disabled:{type:Boolean,default:!1},showNext:{type:Boolean,default:!1}},emits:["update:modelValue","update:value"],setup(i,{emit:d}){const n=i,s=()=>{if(n.disabled)return!1;d("update:modelValue",!n.modelValue),d("update:value",!n.modelValue)};return(r,_)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["radiobox",{disabled:r.disabled}]),onClick:s},[r.modelValue?(e.openBlock(),e.createElementBlock("i",{key:0,class:"iconfont icon-success",style:e.normalizeStyle(`color: ${r.color}`)},null,4)):e.createCommentVNode("",!0),!r.modelValue&&r.showNext?(e.openBlock(),e.createElementBlock("i",M)):e.createCommentVNode("",!0)],2))}}),he="",$=g(A,[["__scopeId","data-v-0491a2b3"]]),F=["onClick"],P={name:"ChuckCascaderItem"},q=e.defineComponent({...P,props:{multiple:{type:Boolean},activeId:{},depth:{},options:{},color:{},height:{}},emits:["checkChange"],setup(i,{emit:d}){const n=i,s=e.ref(0),r=e.ref(-1),_=(a,C)=>{if(C.disabled)return!1;s.value=-1,s.value=a,C.children||(C.checked=n.multiple?!C.checked:!0,d("checkChange",C))},m=a=>{d("checkChange",a)};return e.watch(()=>n.options,a=>{a[s.value]||(s.value=0)},{immediate:!0,deep:!0}),(a,C)=>{const I=e.resolveComponent("ChuckCascaderItem",!0);return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",{class:"cascaderList",style:e.normalizeStyle(`width:${100/a.depth}%;height:${a.height}`)},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.options,(h,y)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["cascaderItem",{active:y===s.value,disabled:h.disabled}]),key:y,onClick:e.withModifiers(k=>_(y,h),["self"])},[e.createTextVNode(e.toDisplayString(h.label)+" ",1),a.multiple?(e.openBlock(),e.createBlock(E,{key:0,color:a.color,modelValue:h.checked,"onUpdate:modelValue":k=>h.checked=k,childChecked:h.childChecked,disabled:h.disabled,"onUpdate:value":k=>m(h)},null,8,["color","modelValue","onUpdate:modelValue","childChecked","disabled","onUpdate:value"])):(e.openBlock(),e.createBlock($,{key:1,color:a.color,modelValue:h.checked,"onUpdate:modelValue":k=>h.checked=k,disabled:h.disabled,showNext:h.children&&h.children.length>0},null,8,["color","modelValue","onUpdate:modelValue","disabled","showNext"]))],10,F))),128))],4),s.value>-1&&a.options[s.value]&&a.options[s.value].children?(e.openBlock(),e.createBlock(I,{key:0,options:a.options[s.value].children??[],multiple:a.multiple,"active-id":r.value,depth:a.depth,onCheckChange:m,color:a.color,height:a.height},null,8,["options","multiple","active-id","depth","color","height"])):e.createCommentVNode("",!0)],64)}}}),ue="",H=g(q,[["__scopeId","data-v-68f94828"]]),G=i=>(e.pushScopeId("data-v-bac9b484"),i=i(),e.popScopeId(),i),J={class:"chuckSearch"},K={class:"inner"},Q=G(()=>e.createElementVNode("i",{class:"iconfont icon-search"},null,-1)),W=["value","placeholder"],X={name:"ChuckSearch"},Y=e.defineComponent({...X,props:{modelValue:{},placeholder:{default:"请输入搜索关键词"}},emits:["update:modelValue"],setup(i,{emit:d}){const n=i,s=r=>{d("update:modelValue",r.target.value)};return(r,_)=>(e.openBlock(),e.createElementBlock("div",J,[e.createElementVNode("div",K,[Q,e.createElementVNode("input",{type:"text",onInput:s,value:n.modelValue,placeholder:r.placeholder},null,40,W)])]))}}),pe="",N=g(Y,[["__scopeId","data-v-bac9b484"]]),Z={class:"chuckCascaderList"},x={key:0,class:"iconfont icon-down"},ee={key:1,class:"iconfont icon-upward"},le={class:"btns"},oe={name:"ChuckCascader"},ce=e.defineComponent({...oe,props:{multiple:{type:Boolean,default:!1},options:{},color:{default:"#1989fa"},title:{default:"请选择"},modelValue:{},height:{default:"250px"},zIndex:{default:2023},filterable:{type:Boolean,default:!0}},emits:["update:modelValue","update:value","confirm"],setup(i,{emit:d}){const n=i,s=e.ref(""),r=e.ref(!1),_=e.computed(()=>n.multiple?n.modelValue||[]:n.modelValue||""),m=e.computed(()=>r.value||_.value.length?n.color:"#333"),a=e.computed(()=>{const{value:l}=_;let o=b(n.options,!1,!1),t=l;return n.multiple||(t=[l]),t.map(c=>{w(o,c)}),t.map(c=>{k(o,c)}),o}),C=e.computed(()=>h(n.options)),I=e.computed(()=>z(s.value,a.value)),h=l=>{let o=[l],t=0;for(;o.length>0;){let c=[];const u=o.pop();(u==null?void 0:u.length)!==0&&(t++,u==null||u.forEach(V=>{V&&Array.isArray(V.children)&&(c=c.concat(...V.children))}),c.length>0&&o.push(c))}return t},y=()=>{let l=[];const o=t=>{t.map(c=>{c.checked?l.push(c):c.children&&o(c.children)})};return o(a.value),l},k=(l,o)=>{var t,c,u,V;for(let p in l){if(l[p].value===o)return[l[p]];if(l[p].children){let R=k(l[p].children??[],o);if(R!==void 0)return l[p].checked=((t=l[p].children)==null?void 0:t.filter(B=>B.checked).length)===((c=l[p].children)==null?void 0:c.length),l[p].childChecked=!!((u=l[p].children)!=null&&u.filter(B=>B.childChecked).length||(V=l[p].children)!=null&&V.filter(B=>B.checked).length&&!l[p].checked),R.concat(l[p])}}},w=(l,o)=>{for(let t in l){if(l[t].value===o)return l[t].checked=!0,l[t].children&&(l[t].children=b(l[t].children??[],!0,!1)),l[t];if(l[t].children){let c=w(l[t].children??[],o);if(c!==void 0)return c}}},z=(l,o)=>{let t=[];return o.forEach(c=>{if(c.label.indexOf(l)>-1)t.push(c);else if(c.children&&c.children.length>0){let u=z(l,c.children);if(u&&u.length>0){let V={...c,children:u};t.push(V)}}}),t},b=(l,o,t)=>l.map(c=>({...c,checked:o,childChecked:t,children:c.children?b(c.children,o,t):null})),O=l=>l.map(o=>(delete o.checked,delete o.childChecked,{...o,children:o.children?O(o.children):null})),ae=l=>{if(n.multiple){l.children=l.children?b(l.children,l.checked,!1):null,k(a.value,l.value);const o=y(),t=o.map(c=>c.value);d("update:modelValue",t),d("update:value",t,O(o))}else d("update:modelValue",l.value),d("update:value",l.value,l)},U=()=>{r.value=!r.value},de=()=>{d("update:modelValue",null)},re=()=>{U(),d("confirm")},se=(l=>{const o=e.ref(null),t=c=>{const{target:u}=c;u.contains(o.value)&&l(c)};return e.onMounted(()=>{o&&document.addEventListener("click",t)}),e.onBeforeUnmount(()=>{document.removeEventListener("click",t)}),o})(()=>{r.value=!1});return(l,o)=>{var t;return e.openBlock(),e.createElementBlock("div",{style:{position:"relative"},ref_key:"chuckCascader",ref:se},[e.createElementVNode("div",Z,[e.createElementVNode("div",{class:"pullDownBtn",onClick:U,style:e.normalizeStyle(`color:${m.value}`)},[e.createTextVNode(e.toDisplayString((t=l.modelValue)!=null&&t.length?`${l.multiple?l.modelValue.length+"项":l.modelValue}`:l.title)+" ",1),r.value?(e.openBlock(),e.createElementBlock("i",ee)):(e.openBlock(),e.createElementBlock("i",x))],4),e.withDirectives(e.createElementVNode("div",{class:"chuckCascader",style:e.normalizeStyle(`z-index:${l.zIndex}`)},[l.filterable?(e.openBlock(),e.createBlock(N,{key:0,modelValue:s.value,"onUpdate:modelValue":o[0]||(o[0]=c=>s.value=c)},null,8,["modelValue"])):e.createCommentVNode("",!0),e.createElementVNode("div",{class:"item",style:e.normalizeStyle(`height:${l.height}`)},[e.createVNode(H,{options:I.value,multiple:l.multiple,"active-id":-1,depth:C.value,onCheckChange:ae,color:l.color,height:l.height},null,8,["options","multiple","depth","color","height"])],4),e.createElementVNode("div",le,[e.createElementVNode("div",{class:"btnItem reset",onClick:de},"重置"),e.createElementVNode("div",{class:"btnItem confirm",style:e.normalizeStyle(`background:${l.color}`),onClick:re},"确定",4)])],4),[[e.vShow,r.value]])])],512)}}}),fe="",S=g(ce,[["__scopeId","data-v-3df44254"]]),te=[S,N,E,$],ne={install:function(i){te.forEach(d=>{i.component(d.name,d)})}};f.CheckBox=E,f.ChuckCascader=S,f.ChuckSearch=N,f.RadioBox=$,f.default=ne,Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
