(function(k,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(k=typeof globalThis<"u"?globalThis:k||self,e(k.ChuckCascader={},k.Vue))})(this,function(k,e){"use strict";const M={key:0,class:"iconfont icon-success"},U={key:1,class:"iconfont icon-minus"},T={name:"CheckBox"},L=e.defineComponent({...T,props:{color:{},modelValue:{type:Boolean},childChecked:{type:Boolean},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","update:value"],setup(s,{emit:i}){const n=s,a=e.computed(()=>n.modelValue||n.childChecked?n.color:"white"),r=e.computed(()=>n.modelValue||n.childChecked?n.color:"#aaa"),u=()=>{if(n.disabled)return!1;i("update:modelValue",!n.modelValue),i("update:value",!n.modelValue)};return(m,d)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["checkbox",{disabled:m.disabled}]),style:e.normalizeStyle(`background-color:${a.value};outline:${r.value} solid 1px`),onClick:u},[m.modelValue&&!m.disabled?(e.openBlock(),e.createElementBlock("i",M)):e.createCommentVNode("",!0),m.childChecked&&!m.disabled?(e.openBlock(),e.createElementBlock("i",U)):e.createCommentVNode("",!0)],6))}}),ke="",y=(s,i)=>{const n=s.__vccOpts||s;for(const[a,r]of i)n[a]=r;return n},E=y(L,[["__scopeId","data-v-695cd852"]]),j={key:1,class:"iconfont icon-next"},A={name:"RadioBox"},F=e.defineComponent({...A,props:{color:{},modelValue:{type:Boolean},disabled:{type:Boolean,default:!1},showNext:{type:Boolean,default:!1}},emits:["update:modelValue","update:value"],setup(s,{emit:i}){const n=s,a=()=>{if(n.disabled||n.showNext)return!1;i("update:modelValue",!n.modelValue),i("update:value",!n.modelValue)};return(r,u)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["radiobox",{disabled:r.disabled}]),onClick:a},[r.modelValue?(e.openBlock(),e.createElementBlock("i",{key:0,class:"iconfont icon-success",style:e.normalizeStyle(`color: ${r.color}`)},null,4)):e.createCommentVNode("",!0),!r.modelValue&&r.showNext?(e.openBlock(),e.createElementBlock("i",j)):e.createCommentVNode("",!0)],2))}}),me="",N=y(F,[["__scopeId","data-v-0c5a9f0c"]]),P=["onClick"],q=["onClick"],x={name:"ChuckCascaderItem"},G=e.defineComponent({...x,props:{multiple:{type:Boolean},activeId:{},depth:{},options:{},color:{},height:{}},emits:["checkChange"],setup(s,{emit:i}){const n=s,a=e.ref(0),r=e.ref(-1),u=(d,_,B=1)=>{if(_.disabled)return!1;a.value=d,B===1?_.children||(_.checked=n.multiple?!_.checked:!0,i("checkChange",_)):i("checkChange",_)},m=d=>{i("checkChange",d)};return e.watch(()=>n.options,d=>{d[a.value]||(a.value=0)},{immediate:!0,deep:!0}),(d,_)=>{const B=e.resolveComponent("ChuckCascaderItem",!0);return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",{class:"cascaderList",style:e.normalizeStyle(`width:${100/d.depth}%;height:${d.height}`)},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(d.options,(h,g)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["cascaderItem",{active:g===a.value,disabled:h.disabled}]),key:g,onClick:e.withModifiers(C=>u(g,h),["self"])},[e.createElementVNode("div",{style:{flex:"1"},onClick:e.withModifiers(C=>u(g,h),["self"])},e.toDisplayString(h.label),9,q),d.multiple?(e.openBlock(),e.createBlock(E,{key:0,color:d.color,modelValue:h.checked,"onUpdate:modelValue":C=>h.checked=C,childChecked:h.childChecked,disabled:h.disabled,"onUpdate:value":C=>u(g,h,2)},null,8,["color","modelValue","onUpdate:modelValue","childChecked","disabled","onUpdate:value"])):(e.openBlock(),e.createBlock(N,{key:1,color:d.color,modelValue:h.checked,"onUpdate:modelValue":C=>h.checked=C,disabled:h.disabled,showNext:h.children&&h.children.length>0},null,8,["color","modelValue","onUpdate:modelValue","disabled","showNext"]))],10,P))),128))],4),a.value>-1&&d.options[a.value]&&d.options[a.value].children?(e.openBlock(),e.createBlock(B,{key:0,options:d.options[a.value].children??[],multiple:d.multiple,"active-id":r.value,depth:d.depth,onCheckChange:m,color:d.color,height:d.height},null,8,["options","multiple","active-id","depth","color","height"])):e.createCommentVNode("",!0)],64)}}}),_e="",H=y(G,[["__scopeId","data-v-4f37b276"]]),J=s=>(e.pushScopeId("data-v-6072fd05"),s=s(),e.popScopeId(),s),K={class:"chuckSearch"},Q={class:"inner"},W=J(()=>e.createElementVNode("i",{class:"iconfont icon-search"},null,-1)),X=["value","placeholder"],Y={name:"ChuckSearch"},Z=e.defineComponent({...Y,props:{modelValue:{},placeholder:{default:"请输入搜索关键词"}},emits:["update:modelValue"],setup(s,{emit:i}){const n=s,a=r=>{i("update:modelValue",r.target.value)};return(r,u)=>(e.openBlock(),e.createElementBlock("div",K,[e.createElementVNode("div",Q,[W,e.createElementVNode("input",{type:"text",onInput:a,value:n.modelValue,placeholder:r.placeholder},null,40,X)])]))}}),Ce="",w=y(Z,[["__scopeId","data-v-6072fd05"]]),ee={class:"chuckCascaderList"},le=["onClick"],oe={key:0,class:"iconfont icon-down"},te={key:1,class:"iconfont icon-upward"},ce=["onClick"],ne={class:"btns"},ae={name:"ChuckCascader"},de=e.defineComponent({...ae,props:{multiple:{type:Boolean,default:!1},options:{},color:{default:"#1989fa"},title:{default:"请选择"},modelValue:{},height:{default:"250px"},zIndex:{default:2023},filterable:{type:Boolean,default:!0}},emits:["update:modelValue","update:value","confirm"],setup(s,{expose:i,emit:n}){const a=s,r=e.ref(""),u=e.ref(!1),m=e.ref(null),d=e.ref(0),_=e.computed(()=>a.multiple?a.modelValue||[]:a.modelValue||""),B=e.computed(()=>u.value||_.value.length?a.color:"#333"),h=e.computed(()=>{const{value:l}=_;let o=$(a.options,!1,!1),c=l;return a.multiple||(c=[l]),c.map(t=>{R(o,t)}),c.map(t=>{I(o,t)}),o}),g=e.computed(()=>ie(a.options)),C=e.computed(()=>O(r.value,h.value)),ie=l=>{let o=[l],c=0;for(;o.length>0;){let t=[];const p=o.pop();(p==null?void 0:p.length)!==0&&(c++,p==null||p.forEach(V=>{V&&Array.isArray(V.children)&&(t=t.concat(...V.children))}),t.length>0&&o.push(t))}return c},he=()=>{let l=[];const o=c=>{c.map(t=>{t.checked?l.push(t):t.children&&o(t.children)})};return o(h.value),l},I=(l,o)=>{var c,t,p,V;for(let f in l){if(l[f].value===o)return[l[f]];if(l[f].children){let D=I(l[f].children??[],o);if(D!==void 0)return l[f].checked=((c=l[f].children)==null?void 0:c.filter(b=>b.checked).length)===((t=l[f].children)==null?void 0:t.length),l[f].childChecked=!!((p=l[f].children)!=null&&p.filter(b=>b.childChecked).length||(V=l[f].children)!=null&&V.filter(b=>b.checked).length&&!l[f].checked),D.concat(l[f])}}},R=(l,o)=>{for(let c in l){if(l[c].value===o)return l[c].checked=!0,l[c].children&&(l[c].children=$(l[c].children??[],!0,!1)),l[c];if(l[c].children){let t=R(l[c].children??[],o);if(t!==void 0)return t}}},O=(l,o)=>{let c=[];return o.forEach(t=>{if(t.label.indexOf(l)>-1)c.push(t);else if(t.children&&t.children.length>0){let p=O(l,t.children);if(p&&p.length>0){let V={...t,children:p};c.push(V)}}}),c},$=(l,o,c)=>l.map(t=>({...t,checked:o,childChecked:c,children:t.children?$(t.children,o,c):null})),v=l=>l.map(o=>(delete o.checked,delete o.childChecked,{...o,children:o.children?v(o.children):null})),ue=l=>{if(a.multiple){l.children=l.children?$(l.children,l.checked,!1):null,I(h.value,l.value);const o=he(),c=o.map(t=>t.value);n("update:modelValue",c),n("update:value",c,v(o))}else n("update:modelValue",l.value),n("update:value",l.value,l)},S=()=>{var l,o;u.value=!u.value,d.value=((l=m.value)==null?void 0:l.getBoundingClientRect().top)+((o=m.value)==null?void 0:o.getBoundingClientRect().height)+2},pe=()=>{n("update:modelValue",null),n("update:value",[],[])},fe=()=>{S(),n("confirm")};return e.onMounted(()=>{}),i({expand:l=>{u.value=l}}),(l,o)=>{var c;return e.openBlock(),e.createElementBlock("div",{style:{position:"relative"},ref_key:"chuckCascaderRef",ref:m},[e.createElementVNode("div",ee,[e.createElementVNode("div",{class:"pullDownBtn",onClick:e.withModifiers(S,["prevent"]),style:e.normalizeStyle(`color:${B.value}`)},[e.createTextVNode(e.toDisplayString((c=l.modelValue)!=null&&c.length?`${l.multiple?l.modelValue.length+"项":l.modelValue}`:l.title)+" ",1),u.value?(e.openBlock(),e.createElementBlock("i",te)):(e.openBlock(),e.createElementBlock("i",oe))],12,le),e.withDirectives(e.createElementVNode("div",{class:"mask",style:e.normalizeStyle(`top:${d.value}px`),onClick:e.withModifiers(S,["prevent"])},null,12,ce),[[e.vShow,u.value]]),e.withDirectives(e.createElementVNode("div",{class:"chuckCascader",style:e.normalizeStyle(`z-index:${l.zIndex};top:${d.value}px`)},[l.filterable?(e.openBlock(),e.createBlock(w,{key:0,modelValue:r.value,"onUpdate:modelValue":o[0]||(o[0]=t=>r.value=t)},null,8,["modelValue"])):e.createCommentVNode("",!0),e.createElementVNode("div",{class:"item",style:e.normalizeStyle(`height:${l.height}`)},[e.createVNode(H,{options:C.value,multiple:l.multiple,"active-id":-1,depth:g.value,onCheckChange:ue,color:l.color,height:l.height},null,8,["options","multiple","depth","color","height"])],4),e.createElementVNode("div",ne,[e.createElementVNode("div",{class:"btnItem reset",onClick:pe},"重置"),e.createElementVNode("div",{class:"btnItem confirm",style:e.normalizeStyle(`background:${l.color}`),onClick:fe},"确定",4)])],4),[[e.vShow,u.value]])])],512)}}}),Ve="",z=y(de,[["__scopeId","data-v-1d36b6a2"]]),re=[z,w,E,N],se={install:function(s){re.forEach(i=>{s.component(i.name,i)})}};k.CheckBox=E,k.ChuckCascader=z,k.ChuckSearch=w,k.RadioBox=N,k.default=se,Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
